{"ast":null,"code":"import { interval } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/student.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction StudentListComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction StudentListComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelement(1, \"div\", 24);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"\\u00D6\\u011Frenci verileri y\\u00FCkleniyor...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction StudentListComponent_div_31_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 29)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\")(18, \"span\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const student_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.studentNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.firstName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r2.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(13, 10, student_r2.birthDate, \"dd.MM.yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(16, 13, student_r2.enrollmentDate, \"dd.MM.yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(student_r2.isActive ? \"status-active\" : \"status-inactive\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", student_r2.isActive ? \"Aktif\" : \"Pasif\", \" \");\n  }\n}\nfunction StudentListComponent_div_31_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"p\");\n    i0.ɵɵtext(2, \"G\\u00F6sterilecek \\u00F6\\u011Frenci bulunamad\\u0131.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction StudentListComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"table\", 26)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"\\u00D6\\u011Frenci No\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Ad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Soyad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"E-posta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Do\\u011Fum Tarihi\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Kay\\u0131t Tarihi\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"Durum\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, StudentListComponent_div_31_tr_21_Template, 20, 16, \"tr\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(22, StudentListComponent_div_31_div_22_Template, 3, 0, \"div\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.filteredStudents);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.filteredStudents.length === 0 && !ctx_r0.error);\n  }\n}\nexport let StudentListComponent = /*#__PURE__*/(() => {\n  class StudentListComponent {\n    constructor(studentService) {\n      this.studentService = studentService;\n      this.students = [];\n      this.filteredStudents = [];\n      this.searchId = '';\n      this.isLoading = false;\n      this.error = '';\n      // Otomatik yenileme için\n      this.refreshInterval = null;\n      this.countdown = 60; // 60 saniye\n      this.countdownInterval = null;\n      this.lastRefreshTime = new Date();\n    }\n    ngOnInit() {\n      this.loadStudents();\n      this.startAutoRefresh();\n    }\n    ngOnDestroy() {\n      this.stopAutoRefresh();\n    }\n    loadStudents() {\n      this.isLoading = true;\n      this.error = '';\n      console.log('Öğrenci verileri yükleniyor...');\n      this.studentService.getStudents().subscribe({\n        next: data => {\n          console.log('API\\'den gelen veri:', data);\n          this.students = data;\n          this.filteredStudents = data;\n          this.isLoading = false;\n          this.lastRefreshTime = new Date();\n          console.log('Öğrenci sayısı:', data.length);\n        },\n        error: error => {\n          console.error('API Hatası detayı:', error);\n          this.error = 'Öğrenci verileri yüklenirken hata oluştu: ' + error.message;\n          this.isLoading = false;\n          // CORS hatası kontrolü\n          if (error.message.includes('CORS') || error.status === 0) {\n            this.error = 'CORS hatası: API sunucusu CORS ayarlarını kontrol edin. API\\'nin çalıştığından emin olun.';\n          }\n        }\n      });\n    }\n    onSearch() {\n      if (!this.searchId.trim()) {\n        this.filteredStudents = this.students;\n        return;\n      }\n      const searchIdNum = parseInt(this.searchId.trim());\n      if (isNaN(searchIdNum)) {\n        this.error = 'Lütfen geçerli bir öğrenci ID girin';\n        return;\n      }\n      this.filteredStudents = this.students.filter(student => student.id === searchIdNum);\n      if (this.filteredStudents.length === 0) {\n        this.error = 'Belirtilen ID ile öğrenci bulunamadı';\n      } else {\n        this.error = '';\n      }\n    }\n    clearSearch() {\n      this.searchId = '';\n      this.filteredStudents = this.students;\n      this.error = '';\n    }\n    // Otomatik yenileme metodları\n    startAutoRefresh() {\n      // Her 60 saniyede bir veri yenile\n      this.refreshInterval = interval(60000).subscribe(() => {\n        this.loadStudents();\n      });\n      // Geri sayım sayacı\n      this.countdownInterval = interval(1000).subscribe(() => {\n        this.countdown--;\n        if (this.countdown <= 0) {\n          this.countdown = 60;\n        }\n      });\n    }\n    stopAutoRefresh() {\n      if (this.refreshInterval) {\n        this.refreshInterval.unsubscribe();\n      }\n      if (this.countdownInterval) {\n        this.countdownInterval.unsubscribe();\n      }\n    }\n    // Manuel yenileme\n    refreshData() {\n      this.loadStudents();\n      this.countdown = 60;\n      this.lastRefreshTime = new Date();\n    }\n    static {\n      this.ɵfac = function StudentListComponent_Factory(t) {\n        return new (t || StudentListComponent)(i0.ɵɵdirectiveInject(i1.StudentService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: StudentListComponent,\n        selectors: [[\"app-student-list\"]],\n        decls: 35,\n        vars: 12,\n        consts: [[1, \"container\"], [1, \"header\"], [1, \"search-section\"], [1, \"search-box\"], [\"type\", \"text\", \"placeholder\", \"\\u00D6\\u011Frenci ID girin...\", 1, \"search-input\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [1, \"search-btn\", 3, \"click\"], [1, \"search-icon\"], [1, \"clear-btn\", 3, \"click\"], [1, \"refresh-btn\", 3, \"click\"], [1, \"refresh-icon\"], [1, \"refresh-info\"], [1, \"refresh-status\"], [1, \"refresh-label\"], [1, \"refresh-time\"], [1, \"countdown-section\"], [1, \"countdown-label\"], [1, \"countdown-timer\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"table-container\", 4, \"ngIf\"], [1, \"info-section\"], [1, \"total-count\"], [1, \"error-message\"], [1, \"loading\"], [1, \"spinner\"], [1, \"table-container\"], [1, \"student-table\"], [\"class\", \"student-row\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"no-data\", 4, \"ngIf\"], [1, \"student-row\"], [1, \"no-data\"]],\n        template: function StudentListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.ɵɵtext(3, \"\\u00D6\\u011Frenci Listesi\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function StudentListComponent_Template_input_ngModelChange_6_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchId, $event) || (ctx.searchId = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"keyup.enter\", function StudentListComponent_Template_input_keyup_enter_6_listener() {\n              return ctx.onSearch();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function StudentListComponent_Template_button_click_7_listener() {\n              return ctx.onSearch();\n            });\n            i0.ɵɵelementStart(8, \"i\", 6);\n            i0.ɵɵtext(9, \"\\uD83D\\uDD0D\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(10, \" Ara \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function StudentListComponent_Template_button_click_11_listener() {\n              return ctx.clearSearch();\n            });\n            i0.ɵɵtext(12, \" Temizle \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function StudentListComponent_Template_button_click_13_listener() {\n              return ctx.refreshData();\n            });\n            i0.ɵɵelementStart(14, \"i\", 9);\n            i0.ɵɵtext(15, \"\\uD83D\\uDD04\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(16, \" Yenile \");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(17, \"div\", 10)(18, \"div\", 11)(19, \"span\", 12);\n            i0.ɵɵtext(20, \"Son Yenileme:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"span\", 13);\n            i0.ɵɵtext(22);\n            i0.ɵɵpipe(23, \"date\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"div\", 14)(25, \"span\", 15);\n            i0.ɵɵtext(26, \"Sonraki Yenileme:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"span\", 16);\n            i0.ɵɵtext(28);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(29, StudentListComponent_div_29_Template, 2, 1, \"div\", 17)(30, StudentListComponent_div_30_Template, 4, 0, \"div\", 18)(31, StudentListComponent_div_31_Template, 23, 2, \"div\", 19);\n            i0.ɵɵelementStart(32, \"div\", 20)(33, \"p\", 21);\n            i0.ɵɵtext(34);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(6);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchId);\n            i0.ɵɵadvance(16);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(23, 9, ctx.lastRefreshTime, \"HH:mm:ss\"));\n            i0.ɵɵadvance(5);\n            i0.ɵɵclassProp(\"warning\", ctx.countdown <= 10);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.countdown, \"s \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate1(\" Toplam \", ctx.filteredStudents.length, \" \\u00F6\\u011Frenci g\\u00F6steriliyor \");\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.DatePipe],\n        styles: [\".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;flex-wrap:wrap;gap:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;margin:0;font-size:2.5rem;font-weight:600}.search-section[_ngcontent-%COMP%]{display:flex;align-items:center}.search-box[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.search-input[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e1e8ed;border-radius:8px;font-size:16px;width:250px;transition:border-color .3s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.search-btn[_ngcontent-%COMP%], .clear-btn[_ngcontent-%COMP%]{padding:12px 20px;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.search-btn[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.search-btn[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:translateY(-2px)}.clear-btn[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.clear-btn[_ngcontent-%COMP%]:hover{background-color:#7f8c8d;transform:translateY(-2px)}.refresh-btn[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff}.refresh-btn[_ngcontent-%COMP%]:hover{background-color:#229954;transform:translateY(-2px)}.search-icon[_ngcontent-%COMP%], .refresh-icon[_ngcontent-%COMP%]{font-size:18px}.refresh-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:15px 20px;border-radius:10px;margin-bottom:20px;border:1px solid rgba(255,255,255,.2)}.refresh-status[_ngcontent-%COMP%], .countdown-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.refresh-label[_ngcontent-%COMP%], .countdown-label[_ngcontent-%COMP%]{color:#2c3e50;font-weight:500;font-size:14px}.refresh-time[_ngcontent-%COMP%]{color:#27ae60;font-weight:600;font-size:14px;background:#27ae601a;padding:4px 8px;border-radius:4px}.countdown-timer[_ngcontent-%COMP%]{color:#3498db;font-weight:700;font-size:16px;background:#3498db1a;padding:6px 12px;border-radius:6px;min-width:40px;text-align:center;transition:all .3s ease}.countdown-timer.warning[_ngcontent-%COMP%]{color:#e74c3c;background:#e74c3c1a;animation:_ngcontent-%COMP%_pulse 1s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.error-message[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;padding:15px;border-radius:8px;margin-bottom:20px;text-align:center;font-weight:500}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;overflow:hidden;margin-bottom:20px}.student-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.student-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#34495e;color:#fff}.student-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 12px;text-align:left;font-weight:600;text-transform:uppercase;letter-spacing:.5px;font-size:12px}.student-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;border-bottom:1px solid #ecf0f1;vertical-align:middle}.student-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;transition:background-color .2s ease}.student-row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.no-data[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#7f8c8d;font-size:18px}.info-section[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.total-count[_ngcontent-%COMP%]{color:#7f8c8d;font-size:16px;margin:0}.status-active[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.status-inactive[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;text-align:center}.search-box[_ngcontent-%COMP%]{flex-direction:column;width:100%}.search-input[_ngcontent-%COMP%]{width:100%}.search-btn[_ngcontent-%COMP%], .clear-btn[_ngcontent-%COMP%], .refresh-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.refresh-info[_ngcontent-%COMP%]{flex-direction:column;gap:10px;text-align:center}.refresh-status[_ngcontent-%COMP%], .countdown-section[_ngcontent-%COMP%]{justify-content:center}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.student-table[_ngcontent-%COMP%]{min-width:800px}.student-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .student-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;font-size:13px}}\"]\n      });\n    }\n  }\n  return StudentListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}